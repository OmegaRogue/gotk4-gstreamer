// Code generated by girgen. DO NOT EDIT.

package gsttag

import (
	"unsafe"

	"github.com/OmegaRogue/gotk4-gstreamer/pkg/gst"
	"github.com/diamondburned/gotk4/pkg/core/gextras"
	coreglib "github.com/diamondburned/gotk4/pkg/core/glib"
)

// #include <stdlib.h>
// #include <glib-object.h>
// #include <gst/tag/tag.h>
import "C"

// GType values.
var (
	GTypeTagMux = coreglib.Type(C.gst_tag_mux_get_type())
)

func init() {
	coreglib.RegisterGValueMarshalers([]coreglib.TypeMarshaler{
		coreglib.TypeMarshaler{T: GTypeTagMux, F: marshalTagMux},
	})
}

// TagMuxOverrides contains methods that are overridable.
type TagMuxOverrides struct {
}

func defaultTagMuxOverrides(v *TagMux) TagMuxOverrides {
	return TagMuxOverrides{}
}

// TagMux provides a base class for adding tags at the beginning or end of a
// stream.
//
//
// Deriving from GstTagMux
//
// Subclasses have to do the following things:
//
//    * In their base init function, they must add pad templates for the sink
//      pad and the source pad to the element class, describing the media type
//      they accept and output in the caps of the pad template.
//    * In their class init function, they must override the
//      GST_TAG_MUX_CLASS(mux_klass)->render_start_tag and/or
//      GST_TAG_MUX_CLASS(mux_klass)->render_end_tag vfuncs and set up a render
//      function.
type TagMux struct {
	_ [0]func() // equal guard
	gst.Element

	gst.TagSetter
}

var (
	_ gst.Elementer = (*TagMux)(nil)
)

// TagMuxer describes types inherited from class TagMux.
//
// To get the original type, the caller must assert this to an interface or
// another type.
type TagMuxer interface {
	coreglib.Objector
	baseTagMux() *TagMux
}

var _ TagMuxer = (*TagMux)(nil)

func init() {
	coreglib.RegisterClassInfo[*TagMux, *TagMuxClass, TagMuxOverrides](
		GTypeTagMux,
		initTagMuxClass,
		wrapTagMux,
		defaultTagMuxOverrides,
	)
}

func initTagMuxClass(gclass unsafe.Pointer, overrides TagMuxOverrides, classInitFunc func(*TagMuxClass)) {
	if classInitFunc != nil {
		class := (*TagMuxClass)(gextras.NewStructNative(gclass))
		classInitFunc(class)
	}
}

func wrapTagMux(obj *coreglib.Object) *TagMux {
	return &TagMux{
		Element: gst.Element{
			GstObject: gst.GstObject{
				InitiallyUnowned: coreglib.InitiallyUnowned{
					Object: obj,
				},
			},
		},
		TagSetter: gst.TagSetter{
			Element: gst.Element{
				GstObject: gst.GstObject{
					InitiallyUnowned: coreglib.InitiallyUnowned{
						Object: obj,
					},
				},
			},
		},
	}
}

func marshalTagMux(p uintptr) (interface{}, error) {
	return wrapTagMux(coreglib.ValueFromNative(unsafe.Pointer(p)).Object()), nil
}

func (v *TagMux) baseTagMux() *TagMux {
	return v
}

// BaseTagMux returns the underlying base object.
func BaseTagMux(obj TagMuxer) *TagMux {
	return obj.baseTagMux()
}

// TagMuxClass structure. Subclasses need to override at least one of the two
// render vfuncs.
//
// An instance of this type is always passed by reference.
type TagMuxClass struct {
	*tagMuxClass
}

// tagMuxClass is the struct that's finalized.
type tagMuxClass struct {
	native *C.GstTagMuxClass
}

// ParentClass: parent class.
func (t *TagMuxClass) ParentClass() *gst.ElementClass {
	valptr := &t.native.parent_class
	var _v *gst.ElementClass // out
	_v = (*gst.ElementClass)(gextras.NewStructNative(unsafe.Pointer(valptr)))
	return _v
}
